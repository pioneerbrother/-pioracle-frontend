// pioracle/src/components/predictions/MarketCard.jsx
import React from 'react';
import { Link } from 'react-router-dom';
import StatusBadge from '../common/StatusBadge';
import './MarketCard.css'; // Ensure this CSS file exists and is styled

// Helper to format expiry timestamp (can be moved to utils/formatters.js later)
const formatExpiry = (timestamp) => {
    if (!timestamp || timestamp === 0) return "N/A";
    return new Date(timestamp * 1000).toLocaleString([], { dateStyle: 'medium', timeStyle: 'short' });
};

// Expects a 'market' object prop with: id, description, expiryTimestamp, status, exists
function MarketCard({ market }) {
    if (!market || !market.exists) { 
        return null; 
    }

    // The 'description' should already be generated by PredictionMarketsListPage
    // based on assetSymbol, targetPrice, isEventMarket etc.
    const displayTitle = market.description || market.assetSymbol || `Market #${market.id}`;

    return (
        <li className="market-card">
            <Link to={`/predictions/${market.id}`} className="market-card-link">
                <div className="market-card-header">
                    <h3 className="market-card-title">{displayTitle}</h3>
                    <StatusBadge status={market.status} />
                </div>
                <div className="market-card-body">
                    <p className="market-card-expiry">
                        Expires: {formatExpiry(market.expiryTimestamp)}
                    </p>
                    {/* Future V2 placeholders: */}
                    {/* market.volume && <p>Volume: {formatTokenAmount(market.volume)}</p> */}
                    {/* market.oddsYes && <p>Odds YES: {market.oddsYes}</p> */}
                </div>
            </Link>
        </li>
    );
}

export default MarketCard;